{"version":3,"file":"claim-profile-0nsUPIkP.js","sources":["../../../public/claim-profile.html?html-proxy&index=0.js"],"sourcesContent":["\n    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js';\n    import { getFirestore, collection, getDocs, updateDoc, doc } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';\n\n    const firebaseConfig = {\n      apiKey: \"YOUR_API_KEY\",\n      authDomain: \"YOUR_APP.firebaseapp.com\",\n      projectId: \"YOUR_PROJECT_ID\",\n      storageBucket: \"YOUR_APP.appspot.com\",\n      messagingSenderId: \"YOUR_SENDER_ID\",\n      appId: \"YOUR_APP_ID\"\n    };\n\n    const app = initializeApp(firebaseConfig);\n    const db = getFirestore(app);\n\n    document.getElementById(\"claimForm\").addEventListener(\"submit\", async function(e) {\n      e.preventDefault();\n      const name = document.getElementById(\"name\").value.trim().toLowerCase();\n      const school = document.getElementById(\"school\").value.trim().toLowerCase();\n      const email = document.getElementById(\"email\").value.trim();\n\n      const snapshot = await getDocs(collection(db, \"players\"));\n      let matched = null;\n\n      snapshot.forEach(docSnap => {\n        const data = docSnap.data();\n        if (\n          data.name?.toLowerCase() === name &&\n          data.school?.toLowerCase() === school &&\n          data.placeholder === true\n        ) {\n          matched = { id: docSnap.id, ...data };\n        }\n      });\n\n      const resultDiv = document.getElementById(\"result\");\n      if (matched) {\n        await updateDoc(doc(db, \"players\", matched.id), {\n          placeholder: false,\n          email: email,\n          claimedAt: new Date().toISOString()\n        });\n        resultDiv.innerHTML = `<p style='color:green'>✅ Profile found and linked. You are now registered as <strong>${matched.name}</strong>.</p>`;\n      } else {\n        resultDiv.innerHTML = `<p style='color:red'>❌ No matching profile found. Please double-check your name and school.</p>`;\n      }\n    });\n  "],"names":["firebaseConfig","app","initializeApp","db","getFirestore","e","name","school","email","snapshot","getDocs","collection","matched","docSnap","data","resultDiv","updateDoc","doc"],"mappings":"uTAII,MAAMA,EAAiB,CACrB,OAAQ,eACR,WAAY,2BACZ,UAAW,kBACX,cAAe,uBACf,kBAAmB,iBACnB,MAAO,aACb,EAEUC,EAAMC,EAAcF,CAAc,EAClCG,EAAKC,EAAaH,CAAG,EAE3B,SAAS,eAAe,WAAW,EAAE,iBAAiB,SAAU,eAAeI,EAAG,CAChFA,EAAE,eAAc,EAChB,MAAMC,EAAO,SAAS,eAAe,MAAM,EAAE,MAAM,KAAI,EAAG,YAAW,EAC/DC,EAAS,SAAS,eAAe,QAAQ,EAAE,MAAM,KAAI,EAAG,YAAW,EACnEC,EAAQ,SAAS,eAAe,OAAO,EAAE,MAAM,KAAI,EAEnDC,EAAW,MAAMC,EAAQC,EAAWR,EAAI,SAAS,CAAC,EACxD,IAAIS,EAAU,KAEdH,EAAS,QAAQI,GAAW,CAC1B,MAAMC,EAAOD,EAAQ,KAAI,EAEvBC,EAAK,MAAM,YAAW,IAAOR,GAC7BQ,EAAK,QAAQ,YAAW,IAAOP,GAC/BO,EAAK,cAAgB,KAErBF,EAAU,CAAE,GAAIC,EAAQ,GAAI,GAAGC,CAAI,EAE7C,CAAO,EAED,MAAMC,EAAY,SAAS,eAAe,QAAQ,EAC9CH,GACF,MAAMI,EAAUC,EAAId,EAAI,UAAWS,EAAQ,EAAE,EAAG,CAC9C,YAAa,GACb,MAAOJ,EACP,UAAW,IAAI,KAAI,EAAG,YAAW,CAC3C,CAAS,EACDO,EAAU,UAAY,wFAAwFH,EAAQ,IAAI,kBAE1HG,EAAU,UAAY,iGAE9B,CAAK"}