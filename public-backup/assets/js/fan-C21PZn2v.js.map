{"version":3,"file":"fan-C21PZn2v.js","sources":["../../../public/fan.html?html-proxy&index=1.js"],"sourcesContent":["\n    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js';\n    import { getFirestore, doc, getDoc, collection, getDocs, query } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';\n\n    const firebaseConfig = {\n      apiKey: \"AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0\",\n      authDomain: \"ball-network-web.firebaseapp.com\",\n      projectId: \"ball-network-web\",\n      storageBucket: \"ball-network-web.appspot.com\",\n      messagingSenderId: \"740915998465\",\n      appId: \"1:740915998465:web:59ac026f3f4c2ec5da3500\"\n    };\n\n    const app = initializeApp(firebaseConfig);\n    const db = getFirestore(app);\n    const fanId = localStorage.getItem(\"fanId\") || \"demoFan\";\n\n    const fanSnap = await getDoc(doc(db, \"fans\", fanId));\n    const fanData = fanSnap.exists() ? fanSnap.data() : {};\n    const followedPlayers = fanData.playersFollowing || [];\n    const followedTeams = fanData.teamsFollowing || [];\n\n    const highlightDiv = document.getElementById(\"fanHighlights\");\n    const reportDiv = document.getElementById(\"fanReports\");\n\n    const today = new Date().toDateString();\n    let highlightToday = false;\n    let reportToday = false;\n\n    const highlightMap = [];\n    for (let playerId of followedPlayers) {\n      const ref = doc(db, \"players\", playerId);\n      const snap = await getDoc(ref);\n      if (!snap.exists()) continue;\n      const d = snap.data();\n      (d.highlights || []).forEach(link => {\n        highlightMap.push({ name: d.name || playerId, link, date: d.updatedAt || new Date().toISOString() });\n        if (d.updatedAt && new Date(d.updatedAt).toDateString() === today) highlightToday = true;\n      });\n    }\n\n    highlightMap.sort((a, b) => new Date(b.date) - new Date(a.date));\n    highlightMap.forEach(h => {\n      highlightDiv.innerHTML += `<a class='highlight-link' href='${h.link}' target='_blank'>ðŸŽ¬ ${h.name}</a>`;\n    });\n    if (highlightToday) document.getElementById(\"alertHighlights\").style.display = \"block\";\n\n    const reportSnap = await getDocs(query(collection(db, \"scoutingReports\")));\n    const reportList = [];\n    reportSnap.forEach(r => {\n      const data = r.data();\n      if (followedPlayers.includes(data.playerId) || followedTeams.includes(data.teamName)) {\n        reportList.push({ summary: data.summary, player: data.playerName || data.teamName, date: data.updatedAt || new Date().toISOString() });\n        if (data.updatedAt && new Date(data.updatedAt).toDateString() === today) reportToday = true;\n      }\n    });\n\n    reportList.sort((a, b) => new Date(b.date) - new Date(a.date));\n    reportList.forEach(r => {\n      reportDiv.innerHTML += `<div><strong>${r.player}</strong>: ${r.summary}</div><br>`;\n    });\n    if (reportToday) document.getElementById(\"alertReports\").style.display = \"block\";\n  "],"names":["firebaseConfig","app","initializeApp","db","getFirestore","fanId","fanSnap","getDoc","doc","fanData","followedPlayers","followedTeams","highlightDiv","reportDiv","today","highlightToday","reportToday","highlightMap","playerId","ref","snap","d","link","a","b","h","reportSnap","getDocs","query","collection","reportList","r","data"],"mappings":"+TAII,MAAMA,EAAiB,CACrB,OAAQ,0CACR,WAAY,mCACZ,UAAW,mBACX,cAAe,+BACf,kBAAmB,eACnB,MAAO,2CACb,EAEUC,EAAMC,EAAcF,CAAc,EAClCG,EAAKC,EAAaH,CAAG,EACrBI,EAAQ,aAAa,QAAQ,OAAO,GAAK,UAEzCC,EAAU,MAAMC,EAAOC,EAAIL,EAAI,OAAQE,CAAK,CAAC,EAC7CI,EAAUH,EAAQ,OAAM,EAAKA,EAAQ,KAAI,EAAK,CAAA,EAC9CI,EAAkBD,EAAQ,kBAAoB,CAAA,EAC9CE,EAAgBF,EAAQ,gBAAkB,CAAA,EAE1CG,EAAe,SAAS,eAAe,eAAe,EACtDC,EAAY,SAAS,eAAe,YAAY,EAEhDC,EAAQ,IAAI,KAAI,EAAG,aAAY,EACrC,IAAIC,EAAiB,GACjBC,EAAc,GAElB,MAAMC,EAAe,CAAA,EACrB,QAASC,KAAYR,EAAiB,CACpC,MAAMS,EAAMX,EAAIL,EAAI,UAAWe,CAAQ,EACjCE,EAAO,MAAMb,EAAOY,CAAG,EAC7B,GAAI,CAACC,EAAK,SAAU,SACpB,MAAMC,EAAID,EAAK,KAAI,GAClBC,EAAE,YAAc,IAAI,QAAQC,GAAQ,CACnCL,EAAa,KAAK,CAAE,KAAMI,EAAE,MAAQH,EAAU,KAAAI,EAAM,KAAMD,EAAE,WAAa,IAAI,KAAI,EAAG,YAAW,CAAE,CAAE,EAC/FA,EAAE,WAAa,IAAI,KAAKA,EAAE,SAAS,EAAE,aAAY,IAAOP,IAAOC,EAAiB,GAC5F,CAAO,CACP,CAEIE,EAAa,KAAK,CAACM,EAAGC,IAAM,IAAI,KAAKA,EAAE,IAAI,EAAI,IAAI,KAAKD,EAAE,IAAI,CAAC,EAC/DN,EAAa,QAAQQ,GAAK,CACxBb,EAAa,WAAa,mCAAmCa,EAAE,IAAI,wBAAwBA,EAAE,IAAI,MACvG,CAAK,EACGV,IAAgB,SAAS,eAAe,iBAAiB,EAAE,MAAM,QAAU,SAE/E,MAAMW,EAAa,MAAMC,EAAQC,EAAMC,EAAW1B,EAAI,iBAAiB,CAAC,CAAC,EACnE2B,EAAa,CAAA,EACnBJ,EAAW,QAAQK,GAAK,CACtB,MAAMC,EAAOD,EAAE,KAAI,GACfrB,EAAgB,SAASsB,EAAK,QAAQ,GAAKrB,EAAc,SAASqB,EAAK,QAAQ,KACjFF,EAAW,KAAK,CAAE,QAASE,EAAK,QAAS,OAAQA,EAAK,YAAcA,EAAK,SAAU,KAAMA,EAAK,WAAa,IAAI,KAAI,EAAG,YAAW,EAAI,EACjIA,EAAK,WAAa,IAAI,KAAKA,EAAK,SAAS,EAAE,aAAY,IAAOlB,IAAOE,EAAc,IAE/F,CAAK,EAEDc,EAAW,KAAK,CAACP,EAAGC,IAAM,IAAI,KAAKA,EAAE,IAAI,EAAI,IAAI,KAAKD,EAAE,IAAI,CAAC,EAC7DO,EAAW,QAAQC,GAAK,CACtBlB,EAAU,WAAa,gBAAgBkB,EAAE,MAAM,cAAcA,EAAE,OAAO,YAC5E,CAAK,EACGf,IAAa,SAAS,eAAe,cAAc,EAAE,MAAM,QAAU"}