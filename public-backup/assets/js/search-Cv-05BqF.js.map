{"version":3,"file":"search-Cv-05BqF.js","sources":["../../../public/assets/js/searchEngine.js"],"sourcesContent":["// Advanced Search System\nclass SearchEngine {\n  constructor() {\n    this.searchIndex = new Map();\n    this.filters = {};\n    this.init();\n  }\n\n  init() {\n    this.setupSearchUI();\n    this.buildSearchIndex();\n    this.setupFilters();\n  }\n\n  setupSearchUI() {\n    const searchContainer = document.getElementById('searchContainer');\n    if (!searchContainer) return;\n\n    searchContainer.innerHTML = `\n      <div class=\"advanced-search\">\n        <div class=\"search-bar\">\n          <input type=\"text\" id=\"searchInput\" placeholder=\"Search players, teams, coaches...\" class=\"search-input\">\n          <button onclick=\"searchEngine.performSearch()\" class=\"search-btn\">\n            <i class=\"icon-search\"></i>\n          </button>\n        </div>\n        \n        <div class=\"search-filters\">\n          <div class=\"filter-group\">\n            <label>Role:</label>\n            <select id=\"roleFilter\">\n              <option value=\"\">All</option>\n              <option value=\"player\">Players</option>\n              <option value=\"coach\">Coaches</option>\n              <option value=\"scout\">Scouts</option>\n            </select>\n          </div>\n          \n          <div class=\"filter-group\">\n            <label>Location:</label>\n            <input type=\"text\" id=\"locationFilter\" placeholder=\"City, State\">\n          </div>\n          \n          <div class=\"filter-group\">\n            <label>Position:</label>\n            <select id=\"positionFilter\">\n              <option value=\"\">All Positions</option>\n              <option value=\"PG\">Point Guard</option>\n              <option value=\"SG\">Shooting Guard</option>\n              <option value=\"SF\">Small Forward</option>\n              <option value=\"PF\">Power Forward</option>\n              <option value=\"C\">Center</option>\n            </select>\n          </div>\n          \n          <div class=\"filter-group\">\n            <label>Skill Level:</label>\n            <select id=\"skillFilter\">\n              <option value=\"\">All Levels</option>\n              <option value=\"beginner\">Beginner</option>\n              <option value=\"intermediate\">Intermediate</option>\n              <option value=\"advanced\">Advanced</option>\n              <option value=\"elite\">Elite</option>\n            </select>\n          </div>\n        </div>\n        \n        <div class=\"search-results\" id=\"searchResults\"></div>\n      </div>\n    `;\n\n    // Add event listeners\n    document\n      .getElementById('searchInput')\n      .addEventListener(\n        'input',\n        this.debounce(this.performSearch.bind(this), 300)\n      );\n    document\n      .getElementById('roleFilter')\n      .addEventListener('change', this.performSearch.bind(this));\n    document\n      .getElementById('locationFilter')\n      .addEventListener(\n        'input',\n        this.debounce(this.performSearch.bind(this), 300)\n      );\n    document\n      .getElementById('positionFilter')\n      .addEventListener('change', this.performSearch.bind(this));\n    document\n      .getElementById('skillFilter')\n      .addEventListener('change', this.performSearch.bind(this));\n  }\n\n  async buildSearchIndex() {\n    // Build search index from Firebase data\n    try {\n      const collections = ['players', 'coaches', 'scouts', 'teams'];\n\n      for (const collection of collections) {\n        const snapshot = await this.db.collection(collection).get();\n        snapshot.forEach(doc => {\n          const data = { id: doc.id, ...doc.data(), collection };\n          this.indexDocument(data);\n        });\n      }\n\n      console.log('Search index built successfully');\n    } catch (error) {\n      console.error('Error building search index:', error);\n    }\n  }\n\n  indexDocument(doc) {\n    const searchableFields = [\n      'name',\n      'position',\n      'school',\n      'city',\n      'state',\n      'skills',\n    ];\n    const tokens = [];\n\n    searchableFields.forEach(field => {\n      if (doc[field]) {\n        tokens.push(...this.tokenize(doc[field].toString()));\n      }\n    });\n\n    tokens.forEach(token => {\n      if (!this.searchIndex.has(token)) {\n        this.searchIndex.set(token, new Set());\n      }\n      this.searchIndex.get(token).add(doc.id);\n    });\n  }\n\n  tokenize(text) {\n    return text\n      .toLowerCase()\n      .replace(/[^\\w\\s]/g, '')\n      .split(/\\s+/)\n      .filter(token => token.length > 2);\n  }\n\n  async performSearch() {\n    const query = document.getElementById('searchInput').value.trim();\n    const roleFilter = document.getElementById('roleFilter').value;\n    const locationFilter = document\n      .getElementById('locationFilter')\n      .value.trim();\n    const positionFilter = document.getElementById('positionFilter').value;\n    const skillFilter = document.getElementById('skillFilter').value;\n\n    let results = [];\n\n    if (query) {\n      results = this.textSearch(query);\n    } else {\n      results = await this.getAllDocuments();\n    }\n\n    // Apply filters\n    results = this.applyFilters(results, {\n      role: roleFilter,\n      location: locationFilter,\n      position: positionFilter,\n      skill: skillFilter,\n    });\n\n    this.displayResults(results);\n  }\n\n  textSearch(query) {\n    const tokens = this.tokenize(query);\n    const matchingDocs = new Set();\n\n    tokens.forEach(token => {\n      if (this.searchIndex.has(token)) {\n        this.searchIndex.get(token).forEach(docId => {\n          matchingDocs.add(docId);\n        });\n      }\n    });\n\n    return Array.from(matchingDocs);\n  }\n\n  async getAllDocuments() {\n    // Return all documents if no search query\n    const results = [];\n    const collections = ['players', 'coaches', 'scouts'];\n\n    for (const collection of collections) {\n      const snapshot = await this.db.collection(collection).limit(20).get();\n      snapshot.forEach(doc => {\n        results.push({ id: doc.id, ...doc.data(), collection });\n      });\n    }\n\n    return results;\n  }\n\n  applyFilters(results, filters) {\n    return results.filter(doc => {\n      if (filters.role && doc.collection !== filters.role + 's') return false;\n      if (filters.location && !this.matchesLocation(doc, filters.location))\n        return false;\n      if (filters.position && doc.position !== filters.position) return false;\n      if (filters.skill && doc.skillLevel !== filters.skill) return false;\n      return true;\n    });\n  }\n\n  matchesLocation(doc, location) {\n    const docLocation = `${doc.city || ''} ${doc.state || ''}`.toLowerCase();\n    return docLocation.includes(location.toLowerCase());\n  }\n\n  displayResults(results) {\n    const resultsContainer = document.getElementById('searchResults');\n\n    if (results.length === 0) {\n      resultsContainer.innerHTML =\n        '<p class=\"no-results\">No results found. Try adjusting your search criteria.</p>';\n      return;\n    }\n\n    resultsContainer.innerHTML = `\n      <div class=\"results-header\">\n        <h3>Search Results (${results.length})</h3>\n        <div class=\"sort-options\">\n          <select onchange=\"searchEngine.sortResults(this.value)\">\n            <option value=\"relevance\">Sort by Relevance</option>\n            <option value=\"name\">Sort by Name</option>\n            <option value=\"location\">Sort by Location</option>\n            <option value=\"recent\">Most Recent</option>\n          </select>\n        </div>\n      </div>\n      <div class=\"results-list\">\n        ${results.map(this.renderResultCard).join('')}\n      </div>\n    `;\n  }\n\n  renderResultCard(result) {\n    const roleIcon = {\n      players: 'üèÄ',\n      coaches: 'üëî',\n      scouts: 'üîç',\n      teams: 'üèÜ',\n    };\n\n    return `\n      <div class=\"result-card\" onclick=\"searchEngine.viewProfile('${result.id}', '${result.collection}')\">\n        <div class=\"result-avatar\">\n          ${roleIcon[result.collection] || 'üë§'}\n        </div>\n        <div class=\"result-info\">\n          <h4>${result.name || 'Unnamed'}</h4>\n          <p class=\"result-details\">\n            ${result.position ? `${result.position} ‚Ä¢ ` : ''}\n            ${result.school || result.team || ''}\n            ${result.city && result.state ? ` ‚Ä¢ ${result.city}, ${result.state}` : ''}\n          </p>\n          <div class=\"result-stats\">\n            ${result.rating ? `Rating: ${result.rating}` : ''}\n            ${result.wins && result.losses ? `Record: ${result.wins}-${result.losses}` : ''}\n          </div>\n        </div>\n        <div class=\"result-actions\">\n          <button class=\"btn-primary\">View Profile</button>\n        </div>\n      </div>\n    `;\n  }\n\n  sortResults(criteria) {\n    // Implement sorting logic\n    console.log('Sorting results by:', criteria);\n  }\n\n  viewProfile(id, collection) {\n    // Navigate to profile page\n    window.location.href = `/profile/${collection}/${id}`;\n  }\n\n  debounce(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  }\n}\n\n// Initialize search engine\nconst searchEngine = new SearchEngine();\nwindow.searchEngine = searchEngine;\n\nexport { SearchEngine };\n"],"names":["SearchEngine","searchContainer","collections","collection","doc","data","error","searchableFields","tokens","field","token","text","query","roleFilter","locationFilter","positionFilter","skillFilter","results","matchingDocs","docId","filters","location","resultsContainer","result","roleIcon","criteria","id","func","wait","timeout","args","later","searchEngine"],"mappings":"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"}