import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{initializeApp as i}from"https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";import{getFirestore as r,doc as l,getDoc as u,getDocs as d,query as y,collection as p,where as w,setDoc as j,serverTimestamp as q,Timestamp as z}from"https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";import{getStorage as R}from"https://www.gstatic.com/firebasejs/9.22.2/firebase-storage.js";import{l as L}from"./teamComparison-DkPk5Wsi.js";import I from"https://cdn.jsdelivr.net/npm/chart.js";require("dotenv").config();const K={apiKey:"AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0",authDomain:"ball-network-web.firebaseapp.com",projectId:"ball-network-web",storageBucket:"ball-network-web.appspot.com",messagingSenderId:"740915998465",appId:"1:740915998465:web:59ac026f3f4c2ec5da3500"},D=i(K),c=r(D);R(D);const v=localStorage.getItem("coachId")||"demoCoach",T=localStorage.getItem("team")||"Demo Team";L("visit",v,"coach");(async function(){const e=l(c,"coaches",v),a=await u(e);if(!a.exists()){document.body.innerHTML='<h2 style="text-align:center;margin-top:100px;">‚ùå Coach profile not found.</h2>';return}if(a.data().approved===!1){document.body.innerHTML='<h2 style="text-align:center;margin-top:100px;">‚è≥ Your account is pending admin approval.</h2>';return}B()})();async function B(){const t=await d(y(p(c,"games"),w("teamName","==",T))),e=document.getElementById("teamGameHistory");e&&(e.innerHTML="",t.forEach(a=>{const o=a.data(),s=a.id,n=document.createElement("div");n.classList.add("game-card"),n.innerHTML=`
      <h3>${o.date||"Unknown"} vs ${o.opponent||"Opponent"}</h3>
      <p>Final Score: ${o.finalScore||"TBD"}</p>
      <button onclick="viewPlayerBreakdowns('${s}')">View Player Stats</button>
      <button onclick="viewGameHighlights('${s}')">View Highlights</button>
    `,e.appendChild(n)}))}window.viewGameHighlights=async function(t){const e=document.getElementById("coachPlayerView");if(!e)return;e.innerHTML=`<h3>üé¨ Highlights for Game: ${t}</h3>`,(await d(p(c,`games/${t}/clips`))).forEach(o=>{const s=o.data(),n=document.createElement("div");n.classList.add("clip-box"),n.innerHTML=`
      <p>${s.type||"Play"}</p>
      <video src="${s.clipUrl}" controls width="320"></video>
    `,e.appendChild(n)})};window.viewPlayerBreakdowns=async function(t){const e=document.getElementById("gameBreakdownView")||document.createElement("div");e.id="gameBreakdownView",e.innerHTML=`<h3>üß† AI Player Tags - ${t}</h3>`;const a=await d(p(c,`playerStats/${t}/plays`)),o={};a.forEach(s=>{const n=s.data();o[n.playerId]||(o[n.playerId]=[]),o[n.playerId].push(n)});for(const[s,n]of Object.entries(o)){const m=document.createElement("div");m.innerHTML=`<strong>${s}</strong><ul>${n.map(g=>`<li>${g.type} at ${g.timestamp}s</li>`).join("")}</ul>`;const Q=l(c,`scoutingReports/${t}_${s}`),$=await u(Q);if($.exists()){const g=$.data();m.innerHTML+=`<p><strong>üìã Scouting Report:</strong><br>${g.report}<br><em>Grade: ${g.grade}</em></p>`}e.appendChild(m)}document.body.appendChild(e)};const k=document.getElementById("uploadForm");k&&k.addEventListener("submit",async t=>{t.preventDefault();const e=document.getElementById("gameId").value.trim(),a=document.getElementById("teamName").value.trim(),o=document.getElementById("opponent").value.trim(),s=document.getElementById("gameDate").value,n=document.getElementById("videoUrl").value.trim(),m=l(c,"games",e);await j(m,{teamName:a,opponent:o,date:s,videoUrl:n,uploadedBy:T,uploadedAt:q(),analysisStatus:"pending",taggingStatus:"pending-tagging"}),await L("upload",v,"coach"),alert("‚úÖ Game uploaded and sent for AI analysis!"),B()});require("dotenv").config();const Z={apiKey:"AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0",authDomain:"ball-network-web.firebaseapp.com",projectId:"ball-network-web",storageBucket:"ball-network-web.appspot.com",messagingSenderId:"740915998465",appId:"1:740915998465:web:59ac026f3f4c2ec5da3500"},_=i(Z),F=r(_),J=localStorage.getItem("team")||"Demo Team",V=y(p(F,"games"),w("teamName","==",J)),X=await d(V),E=[],x=[],M=[],A=[],H=[],G=[];X.forEach(t=>{const e=t.data();E.push(e.gameDate||"Game"),x.push(e.stats?.points||0),M.push(e.stats?.assists||0),A.push(e.stats?.rebounds||0),H.push(e.stats?.steals||0),G.push(e.stats?.blocks||0)});const U=document.getElementById("teamChart").getContext("2d");new I(U,{type:"line",data:{labels:E,datasets:[{label:"Points",data:x,borderColor:"blue",fill:!1},{label:"Assists",data:M,borderColor:"green",fill:!1},{label:"Rebounds",data:A,borderColor:"orange",fill:!1},{label:"Steals",data:H,borderColor:"purple",fill:!1},{label:"Blocks",data:G,borderColor:"red",fill:!1}]},options:{responsive:!0,plugins:{legend:{position:"bottom"}}}});require("dotenv").config();const Y={apiKey:"AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0",authDomain:"ball-network-web.firebaseapp.com",projectId:"ball-network-web",storageBucket:"ball-network-web.appspot.com",messagingSenderId:"740915998465",appId:"1:740915998465:web:59ac026f3f4c2ec5da3500"},W=i(Y),ee=r(W),te=document.getElementById("uploadTrendChart").getContext("2d"),ae=p(ee,"analyticsLog"),f={},h=new Date;h.setDate(h.getDate()-14);const oe=z.fromDate(h),ne=y(ae,w("timestamp",">",oe)),se=await d(ne);se.forEach(t=>{const a=t.data().timestamp.toDate().toLocaleDateString();f[a]=(f[a]||0)+1});const ce=Object.keys(f),ie=Object.values(f);new I(te,{type:"bar",data:{labels:ce,datasets:[{label:"Activity Logs (14 days)",data:ie,backgroundColor:"#0071ce"}]},options:{responsive:!0,scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}});require("dotenv").config();const re={apiKey:"AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0",authDomain:"ball-network-web.firebaseapp.com",projectId:"ball-network-web",storageBucket:"ball-network-web.appspot.com",messagingSenderId:"740915998465",appId:"1:740915998465:web:59ac026f3f4c2ec5da3500"},le=i(re),de=r(le),pe=localStorage.getItem("coachId")||"demoCoach",me=y(p(de,"games"),w("uploadedBy","==",pe)),ge=await d(me),P=[],N=[];ge.forEach(t=>{const e=t.data();if(!e.result||!e.gameDate)return;const a=new Date(e.gameDate);P.push(a.toISOString().split("T")[0]),N.push(e.result.toLowerCase()==="win"?1:0)});const ue=document.getElementById("winLossChart").getContext("2d");new I(ue,{type:"line",data:{labels:P,datasets:[{label:"Win = 1, Loss = 0",data:N,borderColor:"green",tension:.4,fill:!1}]},options:{responsive:!0,scales:{y:{ticks:{stepSize:1,min:0,max:1}}},plugins:{legend:{position:"bottom"}}}});require("dotenv").config();const be={apiKey:"AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0",authDomain:"ball-network-web.firebaseapp.com",projectId:"ball-network-web",storageBucket:"ball-network-web.appspot.com",messagingSenderId:"740915998465",appId:"1:740915998465:web:59ac026f3f4c2ec5da3500"},fe=i(be),ye=r(fe),we=localStorage.getItem("playerId")||localStorage.getItem("teamId")||"demoPlayer",he=l(ye,"advancedMetrics",we),C=document.getElementById("metricsViewer");u(he).then(t=>{if(t.exists()){const e=t.data();C.innerHTML=`
      <h4>Advanced Metrics</h4>
      <ul>
        <li>Effective FG%: ${e.eFG}%</li>
        <li>Turnover %: ${e.turnoverPct}%</li>
        <li>Assist/Turnover: ${e.astToTO??"N/A"}</li>
        <li>Points/Possession: ${e.pointsPerPoss??"N/A"}</li>
        <li>Rebounds: ${e.rebounds??"N/A"}</li>
        <li>Plus/Minus: ${e.plusMinus??"N/A"}</li>
        <li><small>Updated: ${e.timestamp?.toDate?e.timestamp.toDate().toLocaleString():"N/A"}</small></li>
      </ul>
    `}else C.textContent="No advanced metrics available yet."});const Ie={apiKey:"AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0",authDomain:"ball-network-web.firebaseapp.com",projectId:"ball-network-web",storageBucket:"ball-network-web.appspot.com",messagingSenderId:"740915998465",appId:"1:740915998465:web:59ac026f3f4c2ec5da3500"},ve=i(Ie),O=r(ve),$e=localStorage.getItem("team")||"Demo Team",ke=l(O,"teams",$e),S=await u(ke),Ce=S.exists()?S.data():{},Se=document.getElementById("teamTags");Se.innerHTML=(Ce.tags||[]).map(t=>`<li>${t}</li>`).join("");const Le=localStorage.getItem("playerId")||"demoPlayer",b=document.getElementById("chatBox");window.sendCoachMessage=async function(){const t=document.getElementById("chatInput"),e=t.value.trim();if(!e)return;const a=l(O,"players",Le),o=await u(a),s=o.exists()?o.data():{},n=await De(e,s);b.innerHTML+=`<div><strong>You:</strong> ${e}</div>`,b.innerHTML+=`<div><strong>Coach:</strong> ${n}</div>`,b.scrollTop=b.scrollHeight,t.value=""};async function De(t,e){const a=e.avgGrade||0,o=a>=70?"Keep up the great work and focus on consistency!":"Let‚Äôs work on defense and shot selection this week.";return`Your average grade is ${a}. ${o}`}
//# sourceMappingURL=coach-Bqfa5esx.js.map
