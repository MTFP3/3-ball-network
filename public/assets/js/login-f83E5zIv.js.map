{"version":3,"file":"login-f83E5zIv.js","sources":["../../../public/login.html?html-proxy&index=1.js"],"sourcesContent":["\n  import {\n    getAuth,\n    signInWithEmailAndPassword,\n  } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js';\n  import {\n    getFirestore,\n    doc,\n    getDoc,\n  } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';\n  import { app } from '/assets/js/firebaseConfig.js';\n\n  const auth = getAuth(app);\n  const db = getFirestore(app);\n\n  document.getElementById('loginForm').addEventListener('submit', async e => {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    const errorDiv = document.getElementById('loginError');\n    errorDiv.textContent = '';\n\n    try {\n      const userCredential = await signInWithEmailAndPassword(\n        auth,\n        email,\n        password\n      );\n      const uid = userCredential.user.uid;\n      // Check role from Firestore\n      const playerDoc = await getDoc(doc(db, 'players', uid));\n      if (playerDoc.exists()) {\n        window.location.href = '/portals/player/dashboard.html';\n      } else {\n        // Check other roles or redirect to error\n        errorDiv.textContent = 'Role not found. Please contact support.';\n      }\n    } catch (error) {\n      errorDiv.textContent = error.message;\n    }\n  });\n\n  document.getElementById('loginBtn').addEventListener('click', function () {\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    loginUser(email, password);\n  });\n\n  function loginUser(email, password) {\n    const errorDiv = document.getElementById('loginError');\n    errorDiv.textContent = '';\n\n    signInWithEmailAndPassword(auth, email, password)\n      .then(async userCredential => {\n        const uid = userCredential.user.uid;\n        // Check role from Firestore\n        const playerDoc = await getDoc(doc(db, 'players', uid));\n        if (playerDoc.exists()) {\n          window.location.href = '/portals/player/dashboard.html';\n        } else {\n          // Check other roles or redirect to error\n          errorDiv.textContent = 'Role not found. Please contact support.';\n        }\n      })\n      .catch(error => {\n        errorDiv.textContent = error.message;\n      });\n  }\n"],"names":["auth","getAuth","app","db","getFirestore","email","password","errorDiv","uid","signInWithEmailAndPassword","getDoc","doc","error","loginUser","userCredential"],"mappings":"8VAYE,MAAMA,EAAOC,EAAQC,CAAG,EAClBC,EAAKC,EAAaF,CAAG,EAE3B,SAAS,eAAe,WAAW,EAAE,iBAAiB,SAAU,MAAM,GAAK,CACzE,EAAE,eAAc,EAChB,MAAMG,EAAQ,SAAS,eAAe,OAAO,EAAE,MACzCC,EAAW,SAAS,eAAe,UAAU,EAAE,MAC/CC,EAAW,SAAS,eAAe,YAAY,EACrDA,EAAS,YAAc,GAEvB,GAAI,CAMF,MAAMC,GALiB,MAAMC,EAC3BT,EACAK,EACAC,CACR,GACiC,KAAK,KAEd,MAAMI,EAAOC,EAAIR,EAAI,UAAWK,CAAG,CAAC,GACxC,SACZ,OAAO,SAAS,KAAO,iCAGvBD,EAAS,YAAc,yCAE/B,OAAaK,EAAO,CACdL,EAAS,YAAcK,EAAM,OACnC,CACA,CAAG,EAED,SAAS,eAAe,UAAU,EAAE,iBAAiB,QAAS,UAAY,CACxE,MAAMP,EAAQ,SAAS,eAAe,OAAO,EAAE,MACzCC,EAAW,SAAS,eAAe,UAAU,EAAE,MACrDO,EAAUR,EAAOC,CAAQ,CAC7B,CAAG,EAED,SAASO,EAAUR,EAAOC,EAAU,CAClC,MAAMC,EAAW,SAAS,eAAe,YAAY,EACrDA,EAAS,YAAc,GAEvBE,EAA2BT,EAAMK,EAAOC,CAAQ,EAC7C,KAAK,MAAMQ,GAAkB,CAC5B,MAAMN,EAAMM,EAAe,KAAK,KAEd,MAAMJ,EAAOC,EAAIR,EAAI,UAAWK,CAAG,CAAC,GACxC,SACZ,OAAO,SAAS,KAAO,iCAGvBD,EAAS,YAAc,yCAEjC,CAAO,EACA,MAAMK,GAAS,CACdL,EAAS,YAAcK,EAAM,OACrC,CAAO,CACP"}