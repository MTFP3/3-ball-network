{"version":3,"file":"scout-DLJ3OhQS.js","sources":["../../../public/assets/js/scoutDashboard.js","../../../public/scout.html?html-proxy&index=3.js"],"sourcesContent":["require('dotenv').config(); // üëà loads your .env file\n\nimport { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js';\nimport {\n  getFirestore,\n  collection,\n  getDocs,\n  query,\n  where,\n  doc,\n  getDoc,\n} from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';\nimport jsPDF from 'https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js';\nimport {\n  getStorage,\n  ref as storageRef,\n  getDownloadURL,\n} from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-storage.js';\nimport { logAnalyticsEvent } from './analyticsLogger.js';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0',\n  authDomain: 'ball-network-web.firebaseapp.com',\n  projectId: 'ball-network-web',\n  storageBucket: 'ball-network-web.appspot.com',\n  messagingSenderId: '740915998465',\n  appId: '1:740915998465:web:59ac026f3f4c2ec5da3500',\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst storage = getStorage(app);\n\nconst scoutId = localStorage.getItem('scoutId') || 'demoScout';\nconst isVerified = true;\nlogAnalyticsEvent('visit', scoutId, 'scout');\n\nconst searchBar = document.getElementById('searchBar');\nconst playerTable = document.getElementById('playerTable');\n\nsearchBar.addEventListener('input', filterPlayers);\n\nlet allPlayers = [];\n\n(async function checkApproval() {\n  const ref = doc(db, 'scouts', scoutId);\n  const snap = await getDoc(ref);\n  if (!snap.exists()) {\n    document.body.innerHTML =\n      '<h2 style=\"text-align:center;margin-top:100px;\">‚ùå Scout profile not found.</h2>';\n    return;\n  }\n  const data = snap.data();\n  if (data.approved === false) {\n    document.body.innerHTML =\n      '<h2 style=\"text-align:center;margin-top:100px;\">‚è≥ Your account is pending admin approval.</h2>';\n    return;\n  }\n  loadPlayers();\n})();\n\nasync function loadPlayers() {\n  const snap = await getDocs(collection(db, 'players'));\n  allPlayers = [];\n  snap.forEach(doc => {\n    const data = doc.data();\n    allPlayers.push({ id: doc.id, ...data });\n  });\n  renderTable(allPlayers);\n}\n\nfunction renderTable(players) {\n  playerTable.innerHTML = '';\n  players.forEach(p => {\n    const div = document.createElement('div');\n    div.classList.add('player-row');\n    div.innerHTML = `\n      <strong>${p.name}</strong> ‚Äî ${p.position} | ${p.state} | Rating: ${p.rating || 'N/A'}\n      <br>\n      <a href=\"/public/player.html?id=${p.id}\" target=\"_blank\">View Profile</a>\n      ${isVerified && p.coachId ? `<button onclick=\"requestContact('${p.id}', '${p.coachId}')\">Request Contact</button>` : ''}\n      <br><a id=\"reportLink-${p.id}\" target=\"_blank\">Loading report...</a>\n    `;\n    playerTable.appendChild(div);\n\n    const reportRef = storageRef(storage, `reports/${p.id}/daily.pdf`);\n    getDownloadURL(reportRef)\n      .then(url => {\n        const link = document.getElementById(`reportLink-${p.id}`);\n        link.href = url;\n        link.textContent = 'üìÑ Daily Report (PDF)';\n      })\n      .catch(() => {\n        const link = document.getElementById(`reportLink-${p.id}`);\n        link.textContent = 'No report available yet';\n      });\n  });\n}\n\nfunction filterPlayers() {\n  const keyword = searchBar.value.toLowerCase();\n  const filtered = allPlayers.filter(\n    p =>\n      p.name.toLowerCase().includes(keyword) ||\n      (p.position && p.position.toLowerCase().includes(keyword)) ||\n      (p.state && p.state.toLowerCase().includes(keyword))\n  );\n  renderTable(filtered);\n}\n\nwindow.requestContact = async function (playerId, coachId) {\n  const ref = doc(db, 'contactRequests', `${scoutId}_${playerId}`);\n  await setDoc(ref, {\n    scoutId,\n    playerId,\n    coachId,\n    requestedAt: new Date(),\n  });\n  await logAnalyticsEvent('contact', scoutId, 'scout');\n  alert('üì© Contact request sent to coach!');\n};\n\nwindow.searchReports = async function () {\n  const playerQuery = document.getElementById('searchPlayerId').value.trim();\n  const gameQuery = document.getElementById('searchGameId').value.trim();\n  const list = document.getElementById('reportList');\n  list.innerHTML = '<h3>üîç Results:</h3>';\n\n  const snap = await getDocs(collection(db, 'scoutingReports'));\n  snap.forEach(docSnap => {\n    const data = docSnap.data();\n    if (\n      (playerQuery && !data.playerId.includes(playerQuery)) ||\n      (gameQuery && !data.gameId.includes(gameQuery))\n    )\n      return;\n\n    const div = document.createElement('div');\n    div.innerHTML = `\n      <strong>Player:</strong> ${data.playerId}<br>\n      <strong>Game:</strong> ${data.gameId}<br>\n      <strong>Grade:</strong> ${data.grade}<br>\n      <strong>Summary:</strong> ${data.report}<br>\n      <strong>Strengths:</strong> ${data.strengths.join(', ')}<br>\n      <strong>Needs Work:</strong> ${data.areasForImprovement.join(', ')}<br>\n      <button onclick='downloadScoutReport(\"${data.playerId}\", \"${data.gameId}\", ${JSON.stringify(data).replace(/'/g, \"\\\\'\")})'>Download PDF</button>\n      <hr>`;\n    list.appendChild(div);\n  });\n};\n\nwindow.downloadScoutReport = function (playerId, gameId, data) {\n  const docPDF = new jsPDF();\n  docPDF.text(`Scouting Report - Player ${playerId}`, 10, 10);\n  docPDF.text(`Game: ${gameId}`, 10, 20);\n  docPDF.text(`Grade: ${data.grade}`, 10, 30);\n  docPDF.text(`Summary: ${data.report}`, 10, 40);\n  docPDF.text(`Strengths: ${data.strengths.join(', ')}`, 10, 50);\n  docPDF.text(\n    `Areas for Improvement: ${data.areasForImprovement.join(', ')}`,\n    10,\n    60\n  );\n  docPDF.save(`Scouting_Report_${playerId}_${gameId}.pdf`);\n};\n","\n    import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js';\n    import { getFirestore, doc, getDoc } from 'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';\n\n    const firebaseConfig = {\n      apiKey: \"AIzaSyD4XJLc3_CLGvOhMysQTx2fabgZQt3y5g0\",\n      authDomain: \"ball-network-web.firebaseapp.com\",\n      projectId: \"ball-network-web\",\n      storageBucket: \"ball-network-web.appspot.com\",\n      messagingSenderId: \"740915998465\",\n      appId: \"1:740915998465:web:59ac026f3f4c2ec5da3500\"\n    };\n\n    const app = initializeApp(firebaseConfig);\n    const db = getFirestore(app);\n    const playerId = localStorage.getItem(\"playerId\") || \"demoPlayer\";\n\n    const ref = doc(db, \"players\", playerId);\n    const snap = await getDoc(ref);\n    const data = snap.exists() ? snap.data() : {};\n    const tagList = document.getElementById(\"smartTags\");\n    tagList.innerHTML = (data.tags || []).map(t => `<li>${t}</li>`).join('');\n  "],"names":["firebaseConfig","app","initializeApp","db","getFirestore","storage","getStorage","scoutId","logAnalyticsEvent","searchBar","playerTable","filterPlayers","allPlayers","ref","doc","snap","getDoc","loadPlayers","getDocs","collection","data","renderTable","players","p","div","reportRef","storageRef","getDownloadURL","url","link","keyword","filtered","playerId","coachId","playerQuery","gameQuery","list","docSnap","gameId","docPDF","jsPDF","tagList","t"],"mappings":"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"}