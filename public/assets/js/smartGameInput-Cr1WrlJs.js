class r{constructor(){this.gameSession=null,this.voiceRecognition=null,this.isRecording=!1,this.currentPlayer=null,this.quickStats={points:0,rebounds:0,assists:0,steals:0,blocks:0,turnovers:0,fouls:0,fgm:0,fga:0,ftm:0,fta:0},this.gameEvents=[],this.initializeVoiceRecognition()}initializeVoiceRecognition(){if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;this.voiceRecognition=new e,this.voiceRecognition.continuous=!0,this.voiceRecognition.interimResults=!0,this.voiceRecognition.lang="en-US",this.voiceRecognition.onresult=t=>{this.handleVoiceResult(t)},this.voiceRecognition.onerror=t=>{console.error("Voice recognition error:",t.error)}}}startGameSession(e){return this.gameSession={id:this.generateGameId(),homeTeam:e.homeTeam,awayTeam:e.awayTeam,playerTeam:e.playerTeam,opponent:e.opponent,date:new Date().toISOString(),quarter:1,timeRemaining:"12:00",homeScore:0,awayScore:0,players:e.players||[],events:[],isLive:!0},this.gameEvents=[],this.resetQuickStats(),this.gameSession}startVoiceInput(){this.voiceRecognition&&!this.isRecording&&(this.voiceRecognition.start(),this.isRecording=!0,this.showVoiceIndicator())}stopVoiceInput(){this.voiceRecognition&&this.isRecording&&(this.voiceRecognition.stop(),this.isRecording=!1,this.hideVoiceIndicator())}handleVoiceResult(e){const t=e.results,s=t[t.length-1];if(s.isFinal){const a=s[0].transcript.toLowerCase().trim();this.processVoiceCommand(a)}}processVoiceCommand(e){const t={score:/(\w+)\s+(made|scored|hit)\s+(?:a\s+)?(three|2|two|free throw|layup|dunk)/i,miss:/(\w+)\s+(missed|miss)\s+(?:a\s+)?(three|2|two|free throw|layup|shot)/i,assist:/(\w+)\s+(?:to\s+)?(\w+)\s+(?:for\s+(?:a\s+)?)?(three|2|two|score|basket)/i,rebound:/(\w+)\s+(rebound|board|got the rebound)/i,steal:/(\w+)\s+(steal|stole|picked off)/i,block:/(\w+)\s+(block|blocked|swat)/i,turnover:/(\w+)\s+(turnover|lost the ball|travel|double dribble)/i,foul:/(\w+)\s+(foul|fouled)/i,timeout:/(timeout|time out)/i,quarter:/(end of quarter|quarter|period)/i,substitution:/(\w+)\s+(?:in|out)\s+for\s+(\w+)/i};let s=!1;for(const[a,i]of Object.entries(t)){const o=e.match(i);if(o){this.executeVoiceCommand(a,o),s=!0;break}}s||this.showVoiceError(`Command not recognized: "${e}"`)}executeVoiceCommand(e,t){const s=t[1],a=this.findPlayer(s);if(!a&&e!=="timeout"&&e!=="quarter"){this.showVoiceError(`Player "${s}" not found`);return}const i={id:this.generateEventId(),timestamp:new Date().toISOString(),quarter:this.gameSession.quarter,player:a,type:e,description:t[0],processed:!0};switch(e){case"score":this.processScore(i,t[3]);break;case"miss":this.processMiss(i,t[3]);break;case"assist":this.processAssist(i,t[2],t[3]);break;case"rebound":this.processRebound(i);break;case"steal":this.processSteal(i);break;case"block":this.processBlock(i);break;case"turnover":this.processTurnover(i);break;case"foul":this.processFoul(i);break}this.gameEvents.push(i),this.updateGameDisplay(),this.showVoiceConfirmation(i)}processScore(e,t){const s=this.getPointsFromShotType(t);e.points=s,e.shotType=t,this.currentPlayer===e.player?.id&&(this.quickStats.points+=s,this.quickStats.fgm+=1,this.quickStats.fga+=1),this.updateScore(s)}processMiss(e,t){e.shotType=t,e.points=0,this.currentPlayer===e.player?.id&&(this.quickStats.fga+=1)}processAssist(e,t,s){const a=this.getPointsFromShotType(s);e.assistedPlayer=this.findPlayer(t),e.points=a,this.currentPlayer===e.player?.id&&(this.quickStats.assists+=1)}processRebound(e){this.currentPlayer===e.player?.id&&(this.quickStats.rebounds+=1)}processSteal(e){this.currentPlayer===e.player?.id&&(this.quickStats.steals+=1)}processBlock(e){this.currentPlayer===e.player?.id&&(this.quickStats.blocks+=1)}processTurnover(e){this.currentPlayer===e.player?.id&&(this.quickStats.turnovers+=1)}processFoul(e){this.currentPlayer===e.player?.id&&(this.quickStats.fouls+=1)}quickTapScore(e,t="2"){const s={id:this.generateEventId(),timestamp:new Date().toISOString(),quarter:this.gameSession.quarter,player:this.getCurrentPlayer(),type:"score",points:e,shotType:t,method:"quick_tap"};this.quickStats.points+=e,this.quickStats.fgm+=1,this.quickStats.fga+=1,this.gameEvents.push(s),this.updateScore(e),this.updateGameDisplay(),this.showQuickTapFeedback(`+${e} points`)}quickTapMiss(e="2"){const t={id:this.generateEventId(),timestamp:new Date().toISOString(),quarter:this.gameSession.quarter,player:this.getCurrentPlayer(),type:"miss",points:0,shotType:e,method:"quick_tap"};this.quickStats.fga+=1,this.gameEvents.push(t),this.updateGameDisplay(),this.showQuickTapFeedback("Miss recorded")}quickTapAssist(){this.quickStats.assists+=1,this.addQuickEvent("assist"),this.showQuickTapFeedback("+1 Assist")}quickTapRebound(){this.quickStats.rebounds+=1,this.addQuickEvent("rebound"),this.showQuickTapFeedback("+1 Rebound")}quickTapSteal(){this.quickStats.steals+=1,this.addQuickEvent("steal"),this.showQuickTapFeedback("+1 Steal")}quickTapBlock(){this.quickStats.blocks+=1,this.addQuickEvent("block"),this.showQuickTapFeedback("+1 Block")}quickTapTurnover(){this.quickStats.turnovers+=1,this.addQuickEvent("turnover"),this.showQuickTapFeedback("+1 Turnover")}quickTapFoul(){this.quickStats.fouls+=1,this.addQuickEvent("foul"),this.showQuickTapFeedback("+1 Foul")}addQuickEvent(e){const t={id:this.generateEventId(),timestamp:new Date().toISOString(),quarter:this.gameSession.quarter,player:this.getCurrentPlayer(),type:e,method:"quick_tap"};this.gameEvents.push(t),this.updateGameDisplay()}findPlayer(e){return this.gameSession?.players?this.gameSession.players.find(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.firstName?.toLowerCase().includes(e.toLowerCase())||t.lastName?.toLowerCase().includes(e.toLowerCase())):null}getCurrentPlayer(){return this.gameSession?.players?.find(e=>e.id===this.currentPlayer)||{id:this.currentPlayer,name:"Current Player"}}getPointsFromShotType(e){const t=e.toLowerCase();return t.includes("three")||t.includes("3")?3:t.includes("free")?1:2}updateScore(e){this.gameSession&&(this.gameSession.playerTeam==="home"?this.gameSession.homeScore+=e:this.gameSession.awayScore+=e)}showVoiceIndicator(){this.updateUIElement("voice-indicator",{active:!0,text:"Listening..."})}hideVoiceIndicator(){this.updateUIElement("voice-indicator",{active:!1,text:""})}showVoiceConfirmation(e){const t=this.formatEventMessage(e);this.updateUIElement("voice-feedback",{type:"success",message:t,timeout:3e3})}showVoiceError(e){this.updateUIElement("voice-feedback",{type:"error",message:e,timeout:3e3})}showQuickTapFeedback(e){this.updateUIElement("quick-tap-feedback",{message:e,timeout:1500})}formatEventMessage(e){const t=e.player?.name||"Player";switch(e.type){case"score":return`${t} scored ${e.points} points`;case"assist":return`${t} assist recorded`;case"rebound":return`${t} rebound recorded`;case"steal":return`${t} steal recorded`;default:return`${t} ${e.type} recorded`}}updateUIElement(e,t){console.log(`UI Update - ${e}:`,t)}updateGameDisplay(){this.updateUIElement("game-stats",this.quickStats),this.updateUIElement("game-score",{home:this.gameSession?.homeScore||0,away:this.gameSession?.awayScore||0}),this.updateUIElement("recent-events",this.gameEvents.slice(-5))}endQuarter(){this.gameSession.quarter+=1,this.gameSession.timeRemaining="12:00";const e={id:this.generateEventId(),timestamp:new Date().toISOString(),type:"quarter_end",quarter:this.gameSession.quarter-1};this.gameEvents.push(e),this.updateGameDisplay()}endGame(){this.gameSession.isLive=!1,this.gameSession.endTime=new Date().toISOString();const e={...this.quickStats,gameId:this.gameSession.id,opponent:this.gameSession.opponent,result:this.getGameResult(),playTime:this.calculatePlayTime()};return{gameSession:this.gameSession,playerStats:e,events:this.gameEvents}}getGameResult(){const e=this.gameSession.playerTeam==="home"?this.gameSession.homeScore:this.gameSession.awayScore,t=this.gameSession.playerTeam==="home"?this.gameSession.awayScore:this.gameSession.homeScore;return e>t?"W":"L"}calculatePlayTime(){const e=Math.min(this.gameSession.quarter,4)*8,t=Math.min(this.gameEvents.length*.5,e);return Math.round(t)}resetQuickStats(){Object.keys(this.quickStats).forEach(e=>{this.quickStats[e]=0})}generateGameId(){return"game_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}generateEventId(){return"event_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}setCurrentPlayer(e){this.currentPlayer=e,this.resetQuickStats()}getGameStats(){return{session:this.gameSession,currentStats:this.quickStats,events:this.gameEvents,eventCount:this.gameEvents.length}}}typeof window<"u"&&(window.SmartGameInput=r);export{r as SmartGameInput};
//# sourceMappingURL=smartGameInput-Cr1WrlJs.js.map
