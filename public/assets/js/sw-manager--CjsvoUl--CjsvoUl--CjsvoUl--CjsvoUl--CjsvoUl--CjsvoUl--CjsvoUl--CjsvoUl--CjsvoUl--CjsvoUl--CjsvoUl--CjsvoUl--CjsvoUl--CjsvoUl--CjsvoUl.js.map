{"version":3,"file":"sw-manager--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl.js","sources":["../../../public/assets/js/sw-manager--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl.js"],"sourcesContent":["class a {\n  constructor() {\n    ((this.registering = !1), (this.registration = null));\n  }\n  async initialize() {\n    if (!(!('serviceWorker' in navigator) || this.registering)) {\n      this.registering = !0;\n      try {\n        ((this.registration = await navigator.serviceWorker.register('/sw.js')),\n          console.log('SW registered: ', this.registration),\n          this.startUpdateChecking(),\n          this.setupUpdateHandling(),\n          this.setupControllerChangeHandling());\n      } catch (e) {\n        console.error('SW registration failed: ', e);\n      }\n    }\n  }\n  startUpdateChecking() {\n    (this.registration.update(),\n      setInterval(() => {\n        this.registration.update();\n      }, 5e3));\n  }\n  setupUpdateHandling() {\n    this.registration.addEventListener('updatefound', () => {\n      const e = this.registration.installing;\n      (console.log('New service worker found, installing...'),\n        e.addEventListener('statechange', () => {\n          e.state === 'installed' &&\n            (navigator.serviceWorker.controller\n              ? (console.log('New version available, updating immediately...'),\n                e.postMessage({ type: 'SKIP_WAITING' }))\n              : console.log('App is cached for the first time'));\n        }));\n    });\n  }\n  setupControllerChangeHandling() {\n    navigator.serviceWorker.addEventListener('controllerchange', () => {\n      (console.log('Service worker controller changed, reloading page...'),\n        window.location.reload());\n    });\n  }\n  async clearAllCaches() {\n    if (\n      (console.log('Clearing all caches...'),\n      this.registration?.active &&\n        this.registration.active.postMessage({ type: 'CLEAR_CACHE' }),\n      'caches' in window)\n    ) {\n      const e = await caches.keys();\n      await Promise.all(e.map(i => caches.delete(i)));\n    }\n    (console.log('All caches cleared, reloading...'), window.location.reload());\n  }\n  async forceUpdate() {\n    this.registration &&\n      (await this.registration.update(),\n      console.log('Forced service worker update check'));\n  }\n}\nconst t = new a();\ndocument.readyState === 'loading'\n  ? document.addEventListener('DOMContentLoaded', () => t.initialize())\n  : t.initialize();\nwindow.clearAllCaches = () => t.clearAllCaches();\nwindow.forceUpdate = () => t.forceUpdate();\nwindow.swManager = t;\n//# sourceMappingURL=sw-manager--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl--CjsvoUl.js.map\n"],"names":[],"mappings":"AAAA,MAAM,CAAE,CACN,aAAc,CACV,KAAK,YAAc,GAAM,KAAK,aAAe,IACnD,CACE,MAAM,YAAa,CACjB,GAAI,EAAE,EAAE,kBAAmB,YAAc,KAAK,aAAc,CAC1D,KAAK,YAAc,GACnB,GAAI,CACA,KAAK,aAAe,MAAM,UAAU,cAAc,SAAS,QAAQ,EACnE,QAAQ,IAAI,kBAAmB,KAAK,YAAY,EAChD,KAAK,oBAAmB,EACxB,KAAK,oBAAmB,EACxB,KAAK,8BAA6B,CAC5C,OAAe,EAAG,CACV,QAAQ,MAAM,2BAA4B,CAAC,CACnD,CACA,CACA,CACE,qBAAsB,CACnB,KAAK,aAAa,OAAM,EACvB,YAAY,IAAM,CAChB,KAAK,aAAa,OAAM,CAChC,EAAS,GAAG,CACZ,CACE,qBAAsB,CACpB,KAAK,aAAa,iBAAiB,cAAe,IAAM,CACtD,MAAM,EAAI,KAAK,aAAa,WAC3B,QAAQ,IAAI,yCAAyC,EACpD,EAAE,iBAAiB,cAAe,IAAM,CACtC,EAAE,QAAU,cACT,UAAU,cAAc,YACpB,QAAQ,IAAI,gDAAgD,EAC7D,EAAE,YAAY,CAAE,KAAM,cAAc,CAAE,GACtC,QAAQ,IAAI,kCAAkC,EAC9D,CAAS,CACT,CAAK,CACL,CACE,+BAAgC,CAC9B,UAAU,cAAc,iBAAiB,mBAAoB,IAAM,CAChE,QAAQ,IAAI,sDAAsD,EACjE,OAAO,SAAS,OAAM,CAC9B,CAAK,CACL,CACE,MAAM,gBAAiB,CACrB,GACG,QAAQ,IAAI,wBAAwB,EACrC,KAAK,cAAc,QACjB,KAAK,aAAa,OAAO,YAAY,CAAE,KAAM,cAAe,EAC9D,WAAY,OACZ,CACA,MAAM,EAAI,MAAM,OAAO,KAAI,EAC3B,MAAM,QAAQ,IAAI,EAAE,IAAI,GAAK,OAAO,OAAO,CAAC,CAAC,CAAC,CACpD,CACK,QAAQ,IAAI,kCAAkC,EAAG,OAAO,SAAS,OAAM,CAC5E,CACE,MAAM,aAAc,CAClB,KAAK,eACF,MAAM,KAAK,aAAa,OAAM,EAC/B,QAAQ,IAAI,oCAAoC,EACtD,CACA,CACA,MAAM,EAAI,IAAI,EACd,SAAS,aAAe,UACpB,SAAS,iBAAiB,mBAAoB,IAAM,EAAE,WAAU,CAAE,EAClE,EAAE,WAAU,EAChB,OAAO,eAAiB,IAAM,EAAE,eAAc,EAC9C,OAAO,YAAc,IAAM,EAAE,YAAW,EACxC,OAAO,UAAY"}