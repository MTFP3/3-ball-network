{"version":3,"file":"sw-manager--CjsvoUl--CjsvoUl.js","sources":["../../../public/assets/js/sw-manager--CjsvoUl.js"],"sourcesContent":["class a{constructor(){this.registering=!1,this.registration=null}async initialize(){if(!(!(\"serviceWorker\"in navigator)||this.registering)){this.registering=!0;try{this.registration=await navigator.serviceWorker.register(\"/sw.js\"),console.log(\"SW registered: \",this.registration),this.startUpdateChecking(),this.setupUpdateHandling(),this.setupControllerChangeHandling()}catch(e){console.error(\"SW registration failed: \",e)}}}startUpdateChecking(){this.registration.update(),setInterval(()=>{this.registration.update()},5e3)}setupUpdateHandling(){this.registration.addEventListener(\"updatefound\",()=>{const e=this.registration.installing;console.log(\"New service worker found, installing...\"),e.addEventListener(\"statechange\",()=>{e.state===\"installed\"&&(navigator.serviceWorker.controller?(console.log(\"New version available, updating immediately...\"),e.postMessage({type:\"SKIP_WAITING\"})):console.log(\"App is cached for the first time\"))})})}setupControllerChangeHandling(){navigator.serviceWorker.addEventListener(\"controllerchange\",()=>{console.log(\"Service worker controller changed, reloading page...\"),window.location.reload()})}async clearAllCaches(){if(console.log(\"Clearing all caches...\"),this.registration?.active&&this.registration.active.postMessage({type:\"CLEAR_CACHE\"}),\"caches\"in window){const e=await caches.keys();await Promise.all(e.map(i=>caches.delete(i)))}console.log(\"All caches cleared, reloading...\"),window.location.reload()}async forceUpdate(){this.registration&&(await this.registration.update(),console.log(\"Forced service worker update check\"))}}const t=new a;document.readyState===\"loading\"?document.addEventListener(\"DOMContentLoaded\",()=>t.initialize()):t.initialize();window.clearAllCaches=()=>t.clearAllCaches();window.forceUpdate=()=>t.forceUpdate();window.swManager=t;\n//# sourceMappingURL=sw-manager--CjsvoUl.js.map\n"],"names":[],"mappings":"AAAA,MAAM,CAAC,CAAC,aAAa,CAAC,KAAK,YAAY,GAAG,KAAK,aAAa,IAAI,CAAC,MAAM,YAAY,CAAC,GAAG,EAAE,EAAE,kBAAkB,YAAY,KAAK,aAAa,CAAC,KAAK,YAAY,GAAG,GAAG,CAAC,KAAK,aAAa,MAAM,UAAU,cAAc,SAAS,QAAQ,EAAE,QAAQ,IAAI,kBAAkB,KAAK,YAAY,EAAE,KAAK,sBAAsB,KAAK,oBAAmB,EAAG,KAAK,8BAA6B,CAAE,OAAO,EAAE,CAAC,QAAQ,MAAM,2BAA2B,CAAC,CAAC,CAAC,CAAC,CAAC,qBAAqB,CAAC,KAAK,aAAa,OAAM,EAAG,YAAY,IAAI,CAAC,KAAK,aAAa,QAAQ,EAAE,GAAG,CAAC,CAAC,qBAAqB,CAAC,KAAK,aAAa,iBAAiB,cAAc,IAAI,CAAC,MAAM,EAAE,KAAK,aAAa,WAAW,QAAQ,IAAI,yCAAyC,EAAE,EAAE,iBAAiB,cAAc,IAAI,CAAC,EAAE,QAAQ,cAAc,UAAU,cAAc,YAAY,QAAQ,IAAI,gDAAgD,EAAE,EAAE,YAAY,CAAC,KAAK,cAAc,CAAC,GAAG,QAAQ,IAAI,kCAAkC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,+BAA+B,CAAC,UAAU,cAAc,iBAAiB,mBAAmB,IAAI,CAAC,QAAQ,IAAI,sDAAsD,EAAE,OAAO,SAAS,OAAM,CAAE,CAAC,CAAC,CAAC,MAAM,gBAAgB,CAAC,GAAG,QAAQ,IAAI,wBAAwB,EAAE,KAAK,cAAc,QAAQ,KAAK,aAAa,OAAO,YAAY,CAAC,KAAK,aAAa,CAAC,EAAE,WAAW,OAAO,CAAC,MAAM,EAAE,MAAM,OAAO,KAAI,EAAG,MAAM,QAAQ,IAAI,EAAE,IAAI,GAAG,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,kCAAkC,EAAE,OAAO,SAAS,OAAM,CAAE,CAAC,MAAM,aAAa,CAAC,KAAK,eAAe,MAAM,KAAK,aAAa,OAAM,EAAG,QAAQ,IAAI,oCAAoC,EAAE,CAAC,CAAC,MAAM,EAAE,IAAI,EAAE,SAAS,aAAa,UAAU,SAAS,iBAAiB,mBAAmB,IAAI,EAAE,WAAU,CAAE,EAAE,EAAE,WAAU,EAAG,OAAO,eAAe,IAAI,EAAE,eAAc,EAAG,OAAO,YAAY,IAAI,EAAE,YAAW,EAAG,OAAO,UAAU"}