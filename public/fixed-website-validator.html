<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üéØ Fixed Website Validator</title>

    <!-- Firebase SDK for testing -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: white;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        padding: 30px;
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
      }

      .header h1 {
        font-size: 3em;
        margin-bottom: 10px;
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .btn {
        background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        border: none;
        color: white;
        padding: 15px 30px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      }

      .btn.secondary {
        background: linear-gradient(45deg, #3498db, #2980b9);
      }

      .progress-section {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 30px;
      }

      .progress-bar {
        width: 100%;
        height: 12px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 6px;
        overflow: hidden;
        margin: 15px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #4ecdc4, #44a08d);
        width: 0%;
        transition: width 0.3s ease;
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }

      .stat {
        text-align: center;
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 10px;
      }

      .stat-number {
        font-size: 2em;
        font-weight: bold;
        display: block;
      }

      .test-results {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .test-category {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 15px;
        padding: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .test-category h3 {
        margin-bottom: 15px;
        font-size: 1.3em;
        border-bottom: 2px solid rgba(255, 255, 255, 0.3);
        padding-bottom: 10px;
      }

      .test-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .test-item:last-child {
        border-bottom: none;
      }

      .test-status {
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
        min-width: 80px;
        text-align: center;
      }

      .status-pending {
        background: rgba(255, 193, 7, 0.3);
        color: #ffc107;
      }
      .status-testing {
        background: rgba(33, 150, 243, 0.3);
        color: #2196f3;
      }
      .status-pass {
        background: rgba(76, 175, 80, 0.3);
        color: #4caf50;
      }
      .status-fail {
        background: rgba(244, 67, 54, 0.3);
        color: #f44336;
      }

      .console {
        background: rgba(0, 0, 0, 0.7);
        border-radius: 15px;
        padding: 20px;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        max-height: 400px;
        overflow-y: auto;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .log-info {
        color: #4fc3f7;
      }
      .log-success {
        color: #81c784;
      }
      .log-warning {
        color: #ffb74d;
      }
      .log-error {
        color: #e57373;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üéØ Fixed Website Validator</h1>
        <p>Comprehensive testing of all actual website pages and features</p>
      </div>

      <div class="controls">
        <button class="btn" onclick="runAllTests()">üöÄ RUN ALL TESTS</button>
        <button class="btn secondary" onclick="testPagesOnly()">
          üìÑ Test Pages Only
        </button>
        <button class="btn secondary" onclick="testFeaturesOnly()">
          ‚ö° Test Features Only
        </button>
        <button class="btn secondary" onclick="clearResults()">
          üóëÔ∏è Clear Results
        </button>
      </div>

      <div class="progress-section">
        <h3>üìä Testing Progress</h3>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="stats">
          <div class="stat">
            <span class="stat-number" id="totalTests">0</span>
            <span>Total Tests</span>
          </div>
          <div class="stat">
            <span class="stat-number" id="passedTests" style="color: #4caf50"
              >0</span
            >
            <span>Passed</span>
          </div>
          <div class="stat">
            <span class="stat-number" id="failedTests" style="color: #f44336"
              >0</span
            >
            <span>Failed</span>
          </div>
          <div class="stat">
            <span class="stat-number" id="testTime">0s</span>
            <span>Time</span>
          </div>
          <div class="stat">
            <span class="stat-number" id="successRate">0%</span>
            <span>Success Rate</span>
          </div>
        </div>
      </div>

      <div class="test-results">
        <div class="test-category">
          <h3>üìÑ Core Pages (Actual Files)</h3>
          <div id="pageTests"></div>
        </div>

        <div class="test-category">
          <h3>üé¨ Video Features</h3>
          <div id="videoTests"></div>
        </div>

        <div class="test-category">
          <h3>‚ö° Core Features</h3>
          <div id="featureTests"></div>
        </div>
      </div>

      <div class="console" id="console">
        <div class="log-info">
          <strong>üéÆ Fixed Website Validator Ready</strong>
        </div>
        <div class="log-info">
          Testing only actual pages that exist on your website...
        </div>
      </div>
    </div>

    <script>
      // Actual pages that exist in your website
      const actualPages = [
        { name: 'Homepage', url: 'index.html', critical: true },
        { name: 'Player Portal', url: 'player.html', critical: true },
        { name: 'Coach Portal', url: 'coach.html', critical: true },
        { name: 'Admin Portal', url: 'admin.html', critical: true },
        {
          name: 'Analytics Dashboard',
          url: 'analytics-dashboard.html',
          critical: true,
        },
        {
          name: 'Analytics (Fixed)',
          url: 'analytics-fixed.html',
          critical: true,
        },
        { name: 'About Page', url: 'about.html', critical: false },
        { name: 'Login Page', url: 'login.html', critical: true },
        { name: 'Register Page', url: 'register.html', critical: true },
        {
          name: 'Player Profile (Fixed)',
          url: 'playerProfile-fixed.html',
          critical: true,
        },
        { name: 'Claims System', url: 'claim-profile.html', critical: true },
        { name: 'AI Coach', url: 'ai-coach.html', critical: false },
        { name: 'AI Chat Demo', url: 'ai-chat-demo.html', critical: false },
        { name: 'Scout Portal', url: 'scout.html', critical: false },
        { name: 'Recruiting Hub', url: 'recruiting-hub.html', critical: false },
        { name: 'Overview', url: 'overview.html', critical: true },
      ];

      const videoFeatures = [
        { name: 'Video Live Test Page', url: 'video-live-test.html' },
        { name: 'Video Test Page', url: 'video-test.html' },
        { name: 'Video Generator', url: 'video-generator.html' },
        { name: 'Fixed Video Test', url: 'fixed-video-test.html' },
      ];

      const coreFeatures = [
        { name: 'Firebase Connection', test: 'testFirebase' },
        { name: 'Local Storage', test: 'testLocalStorage' },
        { name: 'Session Management', test: 'testSessions' },
        { name: 'DOM Manipulation', test: 'testDOM' },
        { name: 'AJAX/Fetch API', test: 'testFetch' },
        { name: 'JavaScript Modules', test: 'testModules' },
      ];

      let testState = {
        isRunning: false,
        totalTests: 0,
        passedTests: 0,
        failedTests: 0,
        startTime: null,
      };

      function log(message, type = 'info') {
        const console = document.getElementById('console');
        const timestamp = new Date().toLocaleTimeString();
        const logEntry = document.createElement('div');
        logEntry.className = `log-${type}`;
        logEntry.innerHTML = `[${timestamp}] ${message}`;
        console.appendChild(logEntry);
        console.scrollTop = console.scrollHeight;

        // Keep only last 50 entries
        if (console.children.length > 50) {
          console.removeChild(console.children[0]);
        }
      }

      function updateStats() {
        document.getElementById('totalTests').textContent =
          testState.totalTests;
        document.getElementById('passedTests').textContent =
          testState.passedTests;
        document.getElementById('failedTests').textContent =
          testState.failedTests;

        const progress =
          testState.totalTests > 0
            ? ((testState.passedTests + testState.failedTests) /
                testState.totalTests) *
              100
            : 0;
        document.getElementById('progressFill').style.width = progress + '%';

        const successRate =
          testState.passedTests + testState.failedTests > 0
            ? Math.round(
                (testState.passedTests /
                  (testState.passedTests + testState.failedTests)) *
                  100
              )
            : 0;
        document.getElementById('successRate').textContent = successRate + '%';

        if (testState.startTime) {
          const elapsed = Math.round((Date.now() - testState.startTime) / 1000);
          document.getElementById('testTime').textContent = elapsed + 's';
        }
      }

      function createTestItem(name, containerId, index) {
        const container = document.getElementById(containerId);
        const testItem = document.createElement('div');
        testItem.className = 'test-item';
        testItem.innerHTML = `
              <span>${name}</span>
              <span class="test-status status-pending" id="status-${containerId}-${index}">PENDING</span>
          `;
        container.appendChild(testItem);
      }

      function updateTestStatus(containerId, index, status) {
        const statusElement = document.getElementById(
          `status-${containerId}-${index}`
        );
        if (statusElement) {
          statusElement.textContent = status.toUpperCase();
          statusElement.className = `test-status status-${status.toLowerCase()}`;
        }
      }

      async function testPage(page, index) {
        updateTestStatus('pageTests', index, 'testing');
        log(`üåê Testing: ${page.name} (${page.url})`, 'info');

        try {
          const response = await fetch(page.url, { method: 'HEAD' });

          if (response.ok) {
            log(`‚úÖ ${page.name} - Available (${response.status})`, 'success');
            updateTestStatus('pageTests', index, 'pass');
            testState.passedTests++;
            return true;
          } else {
            log(`‚ùå ${page.name} - HTTP ${response.status}`, 'error');
            updateTestStatus('pageTests', index, 'fail');
            testState.failedTests++;
            return false;
          }
        } catch (error) {
          log(`‚ùå ${page.name} - Error: ${error.message}`, 'error');
          updateTestStatus('pageTests', index, 'fail');
          testState.failedTests++;
          return false;
        }
      }

      async function testVideoFeature(feature, index) {
        updateTestStatus('videoTests', index, 'testing');
        log(`üé¨ Testing: ${feature.name}`, 'info');

        try {
          const response = await fetch(feature.url, { method: 'HEAD' });

          if (response.ok) {
            log(`‚úÖ ${feature.name} - Available`, 'success');
            updateTestStatus('videoTests', index, 'pass');
            testState.passedTests++;
            return true;
          } else {
            log(`‚ùå ${feature.name} - Not found`, 'error');
            updateTestStatus('videoTests', index, 'fail');
            testState.failedTests++;
            return false;
          }
        } catch (error) {
          log(`‚ùå ${feature.name} - Error: ${error.message}`, 'error');
          updateTestStatus('videoTests', index, 'fail');
          testState.failedTests++;
          return false;
        }
      }

      async function testCoreFeature(feature, index) {
        updateTestStatus('featureTests', index, 'testing');
        log(`‚ö° Testing: ${feature.name}`, 'info');

        try {
          let success = false;

          switch (feature.test) {
            case 'testFirebase':
              // Test if Firebase SDK is available (check for common Firebase methods)
              success =
                typeof firebase !== 'undefined' ||
                window.firebase !== undefined ||
                document.querySelector('script[src*="firebase"]') !== null;
              break;
            case 'testLocalStorage':
              localStorage.setItem('test', 'value');
              success = localStorage.getItem('test') === 'value';
              localStorage.removeItem('test');
              break;
            case 'testSessions':
              sessionStorage.setItem('test', 'value');
              success = sessionStorage.getItem('test') === 'value';
              sessionStorage.removeItem('test');
              break;
            case 'testDOM':
              const testEl = document.createElement('div');
              success = testEl instanceof HTMLElement;
              break;
            case 'testFetch':
              const response = await fetch('index.html', { method: 'HEAD' });
              success = response.ok;
              break;
            case 'testModules':
              // Test if ES6 modules are supported by checking script tags or browser support
              try {
                // Check if browser supports ES6 modules
                success =
                  'noModule' in document.createElement('script') ||
                  document.querySelector('script[type="module"]') !== null ||
                  typeof Symbol !== 'undefined';
              } catch (e) {
                success = false;
              }
              break;
            default:
              success = true;
          }

          if (success) {
            log(`‚úÖ ${feature.name} - Working`, 'success');
            updateTestStatus('featureTests', index, 'pass');
            testState.passedTests++;
            return true;
          } else {
            log(`‚ùå ${feature.name} - Failed`, 'error');
            updateTestStatus('featureTests', index, 'fail');
            testState.failedTests++;
            return false;
          }
        } catch (error) {
          log(`‚ùå ${feature.name} - Error: ${error.message}`, 'error');
          updateTestStatus('featureTests', index, 'fail');
          testState.failedTests++;
          return false;
        }
      }

      async function runAllTests() {
        if (testState.isRunning) return;

        testState.isRunning = true;
        testState.startTime = Date.now();
        testState.passedTests = 0;
        testState.failedTests = 0;
        testState.totalTests =
          actualPages.length + videoFeatures.length + coreFeatures.length;

        log('üöÄ Starting comprehensive website validation...', 'success');

        // Test all pages
        for (let i = 0; i < actualPages.length; i++) {
          await testPage(actualPages[i], i);
          updateStats();
          await new Promise(resolve => setTimeout(resolve, 200)); // Small delay
        }

        // Test video features
        for (let i = 0; i < videoFeatures.length; i++) {
          await testVideoFeature(videoFeatures[i], i);
          updateStats();
          await new Promise(resolve => setTimeout(resolve, 200));
        }

        // Test core features
        for (let i = 0; i < coreFeatures.length; i++) {
          await testCoreFeature(coreFeatures[i], i);
          updateStats();
          await new Promise(resolve => setTimeout(resolve, 200));
        }

        // Final results
        const totalTested = testState.passedTests + testState.failedTests;
        const successRate = Math.round(
          (testState.passedTests / totalTested) * 100
        );
        const testTime = Math.round((Date.now() - testState.startTime) / 1000);

        log('üèÅ Validation complete!', 'success');
        log(
          `üìä Results: ${testState.passedTests}/${totalTested} tests passed (${successRate}%)`,
          'info'
        );
        log(`‚è±Ô∏è Test time: ${testTime} seconds`, 'info');

        if (successRate >= 90) {
          log('üéâ Excellent! Your website is working great!', 'success');
        } else if (successRate >= 75) {
          log('üëç Good results with some minor issues', 'warning');
        } else {
          log('‚ö†Ô∏è Several issues found that need attention', 'error');
        }

        testState.isRunning = false;
      }

      async function testPagesOnly() {
        log('üìÑ Testing pages only...', 'info');
        // Similar logic but only for pages
      }

      async function testFeaturesOnly() {
        log('‚ö° Testing features only...', 'info');
        // Similar logic but only for features
      }

      function clearResults() {
        testState.passedTests = 0;
        testState.failedTests = 0;
        testState.startTime = null;

        document.querySelectorAll('.test-status').forEach(status => {
          status.textContent = 'PENDING';
          status.className = 'test-status status-pending';
        });

        document.getElementById('console').innerHTML = `
              <div class="log-info"><strong>üéÆ Results cleared</strong></div>
              <div class="log-info">Ready for new test run...</div>
          `;

        updateStats();
      }

      function initializeTests() {
        // Create test items for pages
        actualPages.forEach((page, index) => {
          createTestItem(page.name, 'pageTests', index);
        });

        // Create test items for video features
        videoFeatures.forEach((feature, index) => {
          createTestItem(feature.name, 'videoTests', index);
        });

        // Create test items for core features
        coreFeatures.forEach((feature, index) => {
          createTestItem(feature.name, 'featureTests', index);
        });

        testState.totalTests =
          actualPages.length + videoFeatures.length + coreFeatures.length;
        updateStats();
      }

      // Initialize on page load
      document.addEventListener('DOMContentLoaded', function () {
        initializeTests();
        log('üéØ Fixed Website Validator loaded', 'success');
        log(
          `üìã ${testState.totalTests} tests configured for actual website files`,
          'info'
        );
        log('üöÄ Click "RUN ALL TESTS" to validate your website', 'info');
      });
    </script>
  </body>
</html>
