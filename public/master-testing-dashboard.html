<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🧪 Master Testing Dashboard - 3 Ball Network</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
      }
      .dashboard {
        max-width: 1800px;
        margin: 0 auto;
        padding: 20px;
      }
      .header {
        text-align: center;
        color: white;
        margin-bottom: 40px;
      }
      .header h1 {
        font-size: 4em;
        font-weight: 800;
        margin-bottom: 15px;
        text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      }
      .header p {
        font-size: 1.3em;
        opacity: 0.9;
      }
      .testing-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
      }
      .test-card {
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        border: 3px solid transparent;
      }
      .test-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.15);
        border-color: #667eea;
      }
      .card-icon {
        font-size: 4em;
        text-align: center;
        margin-bottom: 20px;
      }
      .card-title {
        font-size: 1.8em;
        font-weight: 700;
        text-align: center;
        margin-bottom: 15px;
        color: #2c3e50;
      }
      .card-description {
        text-align: center;
        color: #6c757d;
        margin-bottom: 25px;
        line-height: 1.6;
      }
      .card-features {
        list-style: none;
        margin-bottom: 25px;
      }
      .card-features li {
        padding: 8px 0;
        color: #495057;
        position: relative;
        padding-left: 25px;
      }
      .card-features li:before {
        content: '✅';
        position: absolute;
        left: 0;
      }
      .launch-button {
        width: 100%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 20px;
        border-radius: 12px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
      }
      .launch-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      }
      .launch-button:active {
        transform: translateY(0);
      }
      .quick-actions {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 40px;
        text-align: center;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      }
      .quick-actions h2 {
        font-size: 2.5em;
        margin-bottom: 20px;
        color: #2c3e50;
      }
      .action-buttons {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }
      .action-btn {
        background: #28a745;
        color: white;
        border: none;
        padding: 20px 25px;
        border-radius: 12px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
      }
      .action-btn:hover {
        background: #218838;
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
      }
      .action-btn.secondary {
        background: #17a2b8;
      }
      .action-btn.secondary:hover {
        background: #138496;
      }
      .action-btn.warning {
        background: #ffc107;
        color: #212529;
      }
      .action-btn.warning:hover {
        background: #e0a800;
      }
      .status-panel {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        margin-top: 30px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      }
      .status-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }
      .status-item {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        border: 2px solid #e9ecef;
      }
      .status-number {
        font-size: 2.5em;
        font-weight: 800;
        color: #667eea;
      }
      .status-label {
        color: #6c757d;
        margin-top: 8px;
      }
      .iframe-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 10000;
        display: none;
        justify-content: center;
        align-items: center;
      }
      .iframe-wrapper {
        width: 90%;
        height: 90%;
        background: white;
        border-radius: 20px;
        overflow: hidden;
        position: relative;
      }
      .iframe-header {
        background: #343a40;
        color: white;
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .close-btn {
        background: #dc3545;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
      }
      .test-iframe {
        width: 100%;
        height: calc(100% - 60px);
        border: none;
      }
      @media (max-width: 768px) {
        .testing-grid {
          grid-template-columns: 1fr;
        }
        .header h1 {
          font-size: 2.5em;
        }
        .action-buttons {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="dashboard">
      <!-- Header -->
      <div class="header">
        <h1>🧪 Master Testing Dashboard</h1>
        <p>
          Complete testing suite for 3 Ball Network - Test every function with
          precision
        </p>
      </div>

      <!-- Testing Options Grid -->
      <div class="testing-grid">
        <!-- Comprehensive Test Suite -->
        <div class="test-card">
          <div class="card-icon">🔬</div>
          <h3 class="card-title">Comprehensive Test Suite</h3>
          <p class="card-description">
            Advanced testing framework that checks every single function on the
            website with detailed reporting
          </p>
          <ul class="card-features">
            <li>Tests 100+ individual functions</li>
            <li>Categorized testing (Core, Video, Analytics, UI)</li>
            <li>Real-time progress tracking</li>
            <li>Detailed error reporting</li>
            <li>JSON report generation</li>
          </ul>
          <button
            class="launch-button"
            onclick="openTestSuite('comprehensive')"
          >
            Launch Comprehensive Suite
          </button>
        </div>

        <!-- E2E Testing Bot -->
        <div class="test-card">
          <div class="card-icon">🤖</div>
          <h3 class="card-title">E2E Testing Bot</h3>
          <p class="card-description">
            Intelligent automated bot that crawls your website and tests
            functionality like a real user
          </p>
          <ul class="card-features">
            <li>Automated page discovery</li>
            <li>User journey simulation</li>
            <li>Performance monitoring</li>
            <li>Security vulnerability scanning</li>
            <li>Cross-browser compatibility</li>
          </ul>
          <button class="launch-button" onclick="openTestSuite('e2e')">
            Launch Testing Bot
          </button>
        </div>

        <!-- Video System Tester -->
        <div class="test-card">
          <div class="card-icon">🎬</div>
          <h3 class="card-title">Video System Tester</h3>
          <p class="card-description">
            Specialized testing for all video features including upload,
            processing, and playback
          </p>
          <ul class="card-features">
            <li>Video upload testing</li>
            <li>Thumbnail generation</li>
            <li>Player controls validation</li>
            <li>Firebase integration checks</li>
            <li>Demo mode functionality</li>
          </ul>
          <button class="launch-button" onclick="openTestSuite('video')">
            Test Video System
          </button>
        </div>

        <!-- Live Video Demo -->
        <div class="test-card">
          <div class="card-icon">🎥</div>
          <h3 class="card-title">Live Video Demo</h3>
          <p class="card-description">
            Interactive video gallery testing with real upload and playback
            functionality
          </p>
          <ul class="card-features">
            <li>Live video gallery</li>
            <li>Real-time upload testing</li>
            <li>Player interaction testing</li>
            <li>UI component validation</li>
            <li>Mobile responsiveness</li>
          </ul>
          <button class="launch-button" onclick="openTestSuite('live')">
            Open Live Demo
          </button>
        </div>

        <!-- Video Generator -->
        <div class="test-card">
          <div class="card-icon">🎯</div>
          <h3 class="card-title">Video Generator</h3>
          <p class="card-description">
            Create test videos on-demand for testing video upload and processing
            functionality
          </p>
          <ul class="card-features">
            <li>Canvas-based video creation</li>
            <li>Basketball-themed animations</li>
            <li>Custom video generation</li>
            <li>Download test videos</li>
            <li>No external dependencies</li>
          </ul>
          <button class="launch-button" onclick="openTestSuite('generator')">
            Generate Test Videos
          </button>
        </div>

        <!-- Basic Function Test -->
        <div class="test-card">
          <div class="card-icon">⚡</div>
          <h3 class="card-title">Quick Function Test</h3>
          <p class="card-description">
            Fast testing of core website functions for quick validation and
            debugging
          </p>
          <ul class="card-features">
            <li>Module loading verification</li>
            <li>Firebase connection testing</li>
            <li>Basic functionality checks</li>
            <li>Quick error detection</li>
            <li>Development debugging</li>
          </ul>
          <button class="launch-button" onclick="openTestSuite('basic')">
            Run Quick Test
          </button>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <h2>🚀 Quick Actions</h2>
        <p style="margin-bottom: 30px; color: #6c757d; font-size: 1.1em">
          Fast access to testing tools and website features
        </p>

        <div class="action-buttons">
          <a href="/player.html" target="_blank" class="action-btn">
            🏀 Player Portal
          </a>
          <a href="/coach.html" target="_blank" class="action-btn secondary">
            👨‍🏫 Coach Portal
          </a>
          <a href="/admin.html" target="_blank" class="action-btn secondary">
            ⚙️ Admin Portal
          </a>
          <a
            href="/analytics.html"
            target="_blank"
            class="action-btn secondary"
          >
            📊 Analytics
          </a>
          <button class="action-btn" onclick="runAllTests()">
            🧪 Run All Tests
          </button>
          <button class="action-btn warning" onclick="clearTestData()">
            🗑️ Clear Test Data
          </button>
        </div>
      </div>

      <!-- Status Panel -->
      <div class="status-panel">
        <h3
          style="
            text-align: center;
            margin-bottom: 25px;
            color: #2c3e50;
            font-size: 1.8em;
          "
        >
          📊 Testing Status
        </h3>
        <div class="status-grid">
          <div class="status-item">
            <div class="status-number" id="totalTestsRun">0</div>
            <div class="status-label">Total Tests Run</div>
          </div>
          <div class="status-item">
            <div class="status-number" id="testsPassedToday">0</div>
            <div class="status-label">Tests Passed</div>
          </div>
          <div class="status-item">
            <div class="status-number" id="issuesDetected">0</div>
            <div class="status-label">Issues Detected</div>
          </div>
          <div class="status-item">
            <div class="status-number" id="coveragePercent">0%</div>
            <div class="status-label">Test Coverage</div>
          </div>
          <div class="status-item">
            <div class="status-number" id="lastTestTime">Never</div>
            <div class="status-label">Last Test Run</div>
          </div>
          <div class="status-item">
            <div class="status-number" id="systemHealth">100%</div>
            <div class="status-label">System Health</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Test Suites -->
    <div class="iframe-container" id="testModal">
      <div class="iframe-wrapper">
        <div class="iframe-header">
          <h3 id="modalTitle">Testing Suite</h3>
          <button class="close-btn" onclick="closeModal()">✕ Close</button>
        </div>
        <iframe class="test-iframe" id="testIframe"></iframe>
      </div>
    </div>

    <script>
      // Test suite URLs
      const testSuites = {
        comprehensive: '/comprehensive-test-suite.html',
        e2e: '/e2e-test-bot.html',
        video: '/video-test.html',
        live: '/video-live-test.html',
        generator: '/video-generator.html',
        basic: '/video-test.html',
      };

      // Test suite titles
      const testTitles = {
        comprehensive: '🔬 Comprehensive Test Suite',
        e2e: '🤖 E2E Testing Bot',
        video: '🎬 Video System Tester',
        live: '🎥 Live Video Demo',
        generator: '🎯 Video Generator',
        basic: '⚡ Quick Function Test',
      };

      // Open test suite in modal
      function openTestSuite(type) {
        const modal = document.getElementById('testModal');
        const iframe = document.getElementById('testIframe');
        const title = document.getElementById('modalTitle');

        title.textContent = testTitles[type];
        iframe.src = testSuites[type];
        modal.style.display = 'flex';

        // Update last test time
        updateLastTestTime();

        // Log test launch
        console.log(`🚀 Launched ${type} test suite`);
      }

      // Close modal
      function closeModal() {
        const modal = document.getElementById('testModal');
        const iframe = document.getElementById('testIframe');

        modal.style.display = 'none';
        iframe.src = '';
      }

      // Run all tests sequentially
      async function runAllTests() {
        const testOrder = ['basic', 'video', 'comprehensive', 'e2e'];

        for (const testType of testOrder) {
          openTestSuite(testType);

          // Wait for user to close modal before continuing
          await new Promise(resolve => {
            const checkClosed = setInterval(() => {
              const modal = document.getElementById('testModal');
              if (modal.style.display === 'none') {
                clearInterval(checkClosed);
                resolve();
              }
            }, 1000);
          });

          // Brief pause between tests
          await new Promise(resolve => setTimeout(resolve, 2000));
        }

        alert(
          '🎉 All test suites completed! Check individual results for details.'
        );
      }

      // Clear test data
      function clearTestData() {
        if (
          confirm(
            '🗑️ Are you sure you want to clear all test data? This will remove demo videos and test results.'
          )
        ) {
          // Clear localStorage
          const keysToRemove = [
            'demoVideos',
            'demoVideoMarks',
            'demoHighlights',
            'testResults',
          ];
          keysToRemove.forEach(key => localStorage.removeItem(key));

          // Reset status
          updateStatus();

          alert('✅ Test data cleared successfully!');
          console.log('🗑️ Test data cleared from localStorage');
        }
      }

      // Update status panel
      function updateStatus() {
        // Get test data from localStorage
        const demoVideos = JSON.parse(
          localStorage.getItem('demoVideos') || '[]'
        );
        const testResults = JSON.parse(
          localStorage.getItem('testResults') || '[]'
        );

        // Update status displays
        document.getElementById('totalTestsRun').textContent =
          testResults.length || '0';
        document.getElementById('testsPassedToday').textContent =
          testResults.filter(r => r.passed).length || '0';
        document.getElementById('issuesDetected').textContent =
          testResults.filter(r => !r.passed).length || '0';

        // Calculate coverage (simplified)
        const coverage =
          testResults.length > 0
            ? Math.min(100, (testResults.length / 50) * 100)
            : 0;
        document.getElementById('coveragePercent').textContent =
          Math.round(coverage) + '%';

        // Calculate system health
        const passRate =
          testResults.length > 0
            ? (testResults.filter(r => r.passed).length / testResults.length) *
              100
            : 100;
        document.getElementById('systemHealth').textContent =
          Math.round(passRate) + '%';
      }

      // Update last test time
      function updateLastTestTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString();
        document.getElementById('lastTestTime').textContent = timeString;

        // Store in localStorage
        localStorage.setItem('lastTestTime', now.toISOString());
      }

      // Load saved test time on page load
      function loadLastTestTime() {
        const lastTest = localStorage.getItem('lastTestTime');
        if (lastTest) {
          const date = new Date(lastTest);
          document.getElementById('lastTestTime').textContent =
            date.toLocaleTimeString();
        }
      }

      // Close modal on ESC key
      document.addEventListener('keydown', e => {
        if (e.key === 'Escape') {
          closeModal();
        }
      });

      // Close modal on click outside
      document.getElementById('testModal').addEventListener('click', e => {
        if (e.target.id === 'testModal') {
          closeModal();
        }
      });

      // Initialize dashboard
      document.addEventListener('DOMContentLoaded', () => {
        updateStatus();
        loadLastTestTime();

        console.log('🧪 Master Testing Dashboard initialized');
        console.log('💡 Ready to test all website functionality');

        // Update status every 10 seconds
        setInterval(updateStatus, 10000);
      });

      // Show loading when opening external links
      document.querySelectorAll('a[target="_blank"]').forEach(link => {
        link.addEventListener('click', () => {
          console.log(`🔗 Opening: ${link.href}`);
        });
      });
    </script>
  </body>
</html>
