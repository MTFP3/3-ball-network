<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üîß Quick Feature Test</title>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

    <style>
      body {
        font-family: Arial, sans-serif;
        background: #1a1a1a;
        color: white;
        padding: 20px;
      }
      .test-result {
        margin: 10px 0;
        padding: 10px;
        border-radius: 5px;
      }
      .pass {
        background: rgba(0, 255, 0, 0.2);
        border-left: 4px solid #0f0;
      }
      .fail {
        background: rgba(255, 0, 0, 0.2);
        border-left: 4px solid #f00;
      }
      button {
        background: #4caf50;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 10px;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>üîß Quick Feature Test</h1>
    <button onclick="testFeatures()">Test Firebase & Modules</button>
    <div id="results"></div>

    <script>
      function testFeatures() {
        const results = document.getElementById('results');
        results.innerHTML = '';

        // Test Firebase
        const firebaseResult = document.createElement('div');
        firebaseResult.className = 'test-result';

        const firebaseAvailable =
          typeof firebase !== 'undefined' ||
          window.firebase !== undefined ||
          document.querySelector('script[src*="firebase"]') !== null;

        if (firebaseAvailable) {
          firebaseResult.className += ' pass';
          firebaseResult.innerHTML =
            '‚úÖ Firebase Connection - PASS<br>Firebase SDK detected successfully';
        } else {
          firebaseResult.className += ' fail';
          firebaseResult.innerHTML =
            '‚ùå Firebase Connection - FAIL<br>Firebase SDK not detected';
        }
        results.appendChild(firebaseResult);

        // Test JavaScript Modules
        const modulesResult = document.createElement('div');
        modulesResult.className = 'test-result';

        let modulesSupported = false;
        try {
          modulesSupported =
            'noModule' in document.createElement('script') ||
            document.querySelector('script[type="module"]') !== null ||
            typeof Symbol !== 'undefined';
        } catch (e) {
          modulesSupported = false;
        }

        if (modulesSupported) {
          modulesResult.className += ' pass';
          modulesResult.innerHTML =
            '‚úÖ JavaScript Modules - PASS<br>ES6 modules supported';
        } else {
          modulesResult.className += ' fail';
          modulesResult.innerHTML =
            '‚ùå JavaScript Modules - FAIL<br>Module support not detected';
        }
        results.appendChild(modulesResult);

        // Test other features for completeness
        const otherTests = [
          {
            name: 'Local Storage',
            test: () => {
              localStorage.setItem('test', 'value');
              const result = localStorage.getItem('test') === 'value';
              localStorage.removeItem('test');
              return result;
            },
          },
          {
            name: 'Session Storage',
            test: () => {
              sessionStorage.setItem('test', 'value');
              const result = sessionStorage.getItem('test') === 'value';
              sessionStorage.removeItem('test');
              return result;
            },
          },
          {
            name: 'DOM Manipulation',
            test: () => {
              const testEl = document.createElement('div');
              return testEl instanceof HTMLElement;
            },
          },
          {
            name: 'Fetch API',
            test: async () => {
              try {
                const response = await fetch('index.html', { method: 'HEAD' });
                return response.ok;
              } catch (e) {
                return false;
              }
            },
          },
        ];

        otherTests.forEach(async (test, index) => {
          const result = document.createElement('div');
          result.className = 'test-result';

          try {
            const success = await test.test();
            if (success) {
              result.className += ' pass';
              result.innerHTML = `‚úÖ ${test.name} - PASS`;
            } else {
              result.className += ' fail';
              result.innerHTML = `‚ùå ${test.name} - FAIL`;
            }
          } catch (error) {
            result.className += ' fail';
            result.innerHTML = `‚ùå ${test.name} - ERROR: ${error.message}`;
          }

          results.appendChild(result);
        });
      }

      // Show Firebase status on load
      document.addEventListener('DOMContentLoaded', function () {
        console.log('Firebase available:', typeof firebase !== 'undefined');
        console.log(
          'Script tags:',
          document.querySelectorAll('script[src*="firebase"]').length
        );
      });
    </script>
  </body>
</html>
